common_envs:
  PATH: "{{ lookup('env', 'PATH') }}"
  PYTHONPATH: "{{ lookup('env', 'PYTHONPATH') }}:{{ lookup('env', 'PWD') }}"
  PYTHONHOME: "{{ lookup('env', 'PYTHONHOME') }}"
  LD_LIBRARY_PATH: "{{ lookup('env', 'LD_LIBRARY_PATH') }}"
  DATACLAY_HOME: "{{ lookup('env', 'DATACLAY_HOME') }}"
  DATACLAY_LOGLEVEL: "{{ lookup('env', 'DATACLAY_LOGLEVEL') }}"
  DATACLAY_TRACING: "{{ lookup('env', 'DATACLAY_TRACING') | default('false', true) }}"
  DATACLAY_TRACING_HOST: "{{ lookup('env', 'DATACLAY_TRACING_HOST') }}"
  DATACLAY_JOB_PATH: "{{ dataclay_job_path }}" # Used in otel-json-exporter.yaml

backend_properties:
  DATACLAY_BACKEND_PORT: "{{ lookup('env', 'DATACLAY_BACKEND_PORT') | default(6868, true) }}"
  DATACLAY_KV_HOST: "{{ lookup('env', 'DATACLAY_KV_HOST') }}"
  DATACLAY_KV_PORT: "{{ lookup('env', 'DATACLAY_KV_PORT') | default(6379, true) }}"
  DATACLAY_STORAGE_PATH: "{{ dataclay_storage_path }}"

metadata_properties:
  DATACLAY_METADATA_HOST: "{{ lookup('env', 'DATACLAY_METADATA_HOST') }}"
  DATACLAY_METADATA_PORT: "{{ lookup('env', 'DATACLAY_METADATA_PORT') | default(16587, true) }}"
  DATACLAY_KV_HOST: "{{ lookup('env', 'DATACLAY_KV_HOST') }}"
  DATACLAY_KV_PORT: "{{ lookup('env', 'DATACLAY_KV_PORT') | default(6379, true) }}"
  DATACLAY_USERNAME: "{{ lookup('env', 'DATACLAY_USERNAME') | default('testuser', true) }}"
  DATACLAY_PASSWORD: "{{ lookup('env', 'DATACLAY_PASSWORD') | default('s3cret', true) }}"
  DATACLAY_DATASET: "{{ lookup('env', 'DATACLAY_DATASET') | default('testdata', true) }}"

client_properties:
  DC_HOST: "{{ lookup('env', 'DC_HOST') }}"
  DC_PORT: "{{ lookup('env', 'DC_PORT') | default(16587, true) }}"
  DC_USERNAME: "{{ lookup('env', 'DC_USERNAME') }}"
  DC_PASSWORD: "{{ lookup('env', 'DC_PASSWORD') }}"
  DC_DATASET: "{{ lookup('env', 'DC_DATASET') }}"

ansible_python_interpreter: "{{ ansible_playbook_python }}" # Uses the venv python. Maybe not optimized for HPC (get which python otherwise)

dataclay_job_path: "{{ lookup('env', 'HOME') }}/.dataclay/{{ lookup('env', 'SLURM_JOB_ID') }}"
dataclay_log_path: "{{ dataclay_job_path }}/logs"
dataclay_storage_path: "{{ dataclay_job_path }}/storage"
